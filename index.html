<html>
  <head>
    <!-- Moralis SDK code -->
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  </head>
  <body>
    <h1>NFT DEMO</h1>

    <script>
      
      const serverUrl = "https://ht1tweosu3li.usemoralis.com:2053/server";
      const appId = "bIFn85NyDLR5CGfIzPaAqliWSpKwUuTOOEvK1KA6";
      Moralis.start({ serverUrl, appId });
      
      async function getNFTs() {
        const options = { chain: 'eth', address: '0x69023dddab45f345f2b683c180001d017fc0a540' };
        const nfts = await Moralis.Web3API.account.getNFTs(options);
        
        //console.log(nfts);
        
        //nfts.forEach(function(nft){
        for (const key in nfts) {
          let url = fixURL(`${nfts[key]}`);
          
          fetch(url)
          .then(response => response.json())
          .then(data => {
            //$('content').html($('content').html()+"<h2>"+data.name+"</h2>");
            $("body").append("<h2>"+data.name+"</h2>");
            //$('content').html($('content').html()+"<h3>"+data.description+"</h2>");
            $("body").append("<h3>"+data.description+"</h3>")
            //$('content').html($('content').html()+"<img width=100 height=100 src='"+fixURL(data.image)+"'/img>");
            //$("<img>", { src: fixURL(data.image) });
            $("body").append("<img width=100 height=100 src='"+fixURL(data.image)+"'/>");
          });
        }
      }
                
      function fixURL(url) {
        if(url.startsWith("ipfs")){
          return "https://ipfs.moralis.io:2053/ipfs/"+url.split("ipfs://ipfs/").slice(-1);
        }
        else {
          return url+"?format=json";
        }
      }
      
      getNFTs();
      
    </script>
  </body>
</html>
